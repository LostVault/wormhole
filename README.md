<h1 align="center">
  <img src="sources/images/Wormhole - Logo - Small.png" alt="ᓚᘏᗢ" width="150" height="150">
  <br></br>
  WORMHOLE
  <br>
</h1>

<p align="center">
   <b>Приложение для обмена текстовыми и файловыми сообщениями между серверами по игре «Elite Dangerous» в «Discord»</b>
</p>

<p align="center">
		<a href="https://discord.gg/HFqmXPvMxC">Discord сервер разработчиков</a>
</p>

<div align="center">
   <a href="https://discord.com/oauth2/authorize?client_id=876127339161981059&scope=bot%20applications.commands">
      <kbd>Подключить приложение к серверу</kbd>
   </a>
</div>

> #### ⚠ ВНИМАНИЕ
   > На данный момент возможность подключить приложение к своему серверу отключена. В скором будущем, данная возможность будет включена повторно.

## Описание
**Wormhole** создан для обмена текстовыми и файловыми сообщениями между серверами по игре [Elite Dangerous](https://www.elitedangerous.com/) в Discord. В первую очередь приложение направлено помочь эскадронам с закрытыми серверами, обмениваться сообщениями с открытыми серверами и для тех пользователей, которые предпочитают использовать только один сервер по [Elite Dangerous](https://www.elitedangerous.com/), но с возможностью общаться и с другими эскадронами. Если вы владелец одного из серверов по Elite Dangerous или связанной тематике и хотите подключить приложение к себе на сервер, воспользуйтесь ссылкой выше. Для остальных же данное приложение может быть не так востребовано, но так как приложение полностью автономное и не привязано к какому-либо серверу, вы можете запустить у себя свой собственный экземпляр данного приложения и использовать его на своих серверах по любой тематики.

## Команды
- Для владельца приложения
    - `ping` — Проверка состояния приложения

- Для команды модераторов канала и владельца приложения
    - `blacklist add` — Внести пользователя в чёрный список приложения
    - `blacklist show` — Показать чёрный список приложения
    - `blacklist remove` — Удалить пользователя из чёрного списка приложения
    - `server_leave` — Отключить приложение от сервера

- Для администратора сервера
    - `setup` — Создать глобальный канал для обмена сообщениями между серверами

- Для всех пользователей
    - `rules` — Показать правила использования глобального канала
    - `information` — Показать информацию о приложение
    - `servers_list` — Вывести список серверов, к которым подключено приложение

## Подключить
Чтобы подключить и настроить приложение на своём сервере, воспользуйтесь действиями указанными ниже:

1. Подключите приложение к своему сервер по данной [ссылке](https://discord.com/oauth2/authorize?client_id=876127339161981059&scope=bot%20applications.commands)
2. Воспользоваться командой `setup` с косоей чертой для создания глобального канала на своём сервер или вручную создайте канал с названием `wormhole`
   - Команда с косой чертой должны автоматически создать канал `wormhole`
   - Предоставить приложение права `Просмотр канала`, `Отправлять сообщения`, `Встраивать ссылки`, `Прикреплять файлы`, `Управлять сообщениями` на канале `wormhole`
   - Включить `Медленный режим` на `30 секунд`

3. Выдать приложению вручную права `Управлять каналом`, `Управлять правами` на канале `wormhole`
   > #### ⚠ ВНИМАНИЕ
   > Права предоставляются вручную, так как для их автоматического предоставления потребуется предоставить приложению права `Администратора`, что в данный момент мы считаем не целесообразным.


## Установка
Для запуска на своё сервере, требуется в файле config.py указать переменые окружения:

1. `APP_TOKEN` - токен для бота, который создаётся автоматически на [официальном сайте](https://discord.com/developers/applications) когда создаёте новое приложение;
2. `APP_GLOBALCHANNEL` - имя глобального канала, который будет забриджован. Это название едино для всех серверов;
3. `APP_ENVIRONMENT` - тип окружения, в котором происходит запуск, может быть либо test, либо prod для тестового и продового окружения соответственно. Различия в функционировании в зависимости от окружения:
   - `test` - в данном окружении для слэш-команд происходит их регистрация на всех серверах к которым подключено приложение, но не глобально, так как глобальная регистрация может занять до нескольких часов, что не очень удобно при отладке;
   - `prod` - в этом подход регистрации команд не глобально имеет один минус - при добавлении бота на новые сервер, что бы команды зарегистрировались, нужно перезапустить бота, поэтому в проде используется глобальная регистрация команд.
4. `FILTER_COOLDOWN` - указываем промежуток времени в секундах, в которое можно отправить одно сообщение в глобальном канале от одного пользователя.

<p align="right">
  <br>
  <img src="sources/images/GPLv3_Logo.svg" alt="ᓚᘏᗢ" width="15%" height="15%">
</p>